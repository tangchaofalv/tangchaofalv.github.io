<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>唐小律的网页实验室</title>
	<link rel="shortcut icon" href="./images/favicon.ico">
	<link rel="stylesheet" type="text/css" href="./css/common.css">
	<link rel="stylesheet" type="text/css" href="./css/indexCss.css">
</head>
<body>
	<div class="body">
		<header>
			<div class="header-top">
				<div class="container">
					<div class="nav-box">
						<div class="nav-left">
							<nav class="nav-logo">
								<img src="./images/logo2.png" width="150" height="60">
							</nav>
						</div>
						<nav class="nav-main">
							<ul class="nav-main-ul">
								<li><a href="">Gallery</a></li>
								<li><a href="">Videos</a></li>
								<li><a href="">about.</a></li>
							</ul>
						</nav>
					</div>
				</div>				
			</div>
		</header>

		<div class="main">
			<div style="margin:0 auto; width:100%;min-width:100px;" id="elem">
				
			</div>
		</div>
		<footer>
			<div>
				<p>
					CopyRight:tanglv
					<span id="timespan">
						09:17
					</span>
				</p>
			</div>
		</footer>
		<!-- <div id="fd">
			<img lowsrc="./images/1_low.jpg" src="./images/1.jpg" width='400' height='400'> 
		</div> -->
	</div>
</body>
<script src="./lib/commonUtil.js"></script>
<script src="./lib/myDatas.js"></script>
<script src="./lib/jquery-2.1.4.min.js"></script>

<script type="text/javascript">
	/*$(function(){
		console.log('i am ready');
		$("div.main div ul li:gt(0)").hide();

		var num = 5;
		var currentNun = 0;
		var timeFlag = null;

		function bannerMove(){
			timeFlag = setInterval(function(){
				moveBanner();
			},4000);
		}
		bannerMove();
		function moveBanner(){
			if(currentNun==num-1){
				currentNun=-1;
			}
			$('div.main div ul li').eq(currentNun+1).fadeIn('slow').siblings('li').fadeOut('slow');
			currentNun++;
		}
	});*/
	$(function(){

		setInterval(function(){
			var clock = new Date();
			var strClock = clock.getHours()+":"+clock.getMinutes()+":"+clock.getSeconds();
			$('#timespan').text(strClock);
		},1000);

		setTimeout(function(){
			//rollBg();
		},2000);


		function rollBg(){
			var indexNum = 1;
			var bgName = './images/'+(++indexNum)+'.jpg';
			$('#elem').fadeTo('slow', 0, function(){
			 	$(this).css('background-image', 'url('+bgName+')');
			}).fadeTo('slow', 1);

			setInterval(function(){
				if(indexNum!=5){
					bgName = './images/'+(++indexNum)+'.jpg';
				}else{
					indexNum = 0;
					bgName = './images/'+(++indexNum)+'.jpg';
				}
				$('#elem').fadeTo('slow', 0, function(){
				 	$(this).css('background-image', 'url('+bgName+')');
				}).fadeTo('slow', 1);
			},4000);
		}

		var bgImgArray = new Array();
		var imgIndex = 1;
		loadBGImgs(imgIndex,bgImgArray);

		function loadBGImgs(imgIndexP,bgImgArray){
			if(bgImgArray.length<5){
				var tmpImg = new Image();
				tmpImg.src = './images/'+imgIndexP+'.jpg';

				tmpImg.onload = function(){
					imgIndexP++;
					bgImgArray.push(tmpImg);
					loadBGImgs(imgIndexP,bgImgArray);
				}
			}else{
				
				rollBg2();
			}
		}

		function rollBg2(){
			var indexNum = 0;

			setInterval(function(){
				if(indexNum!=4){
					bgName = bgImgArray[indexNum].src;
				}else{
					indexNum = 0;
					bgName = bgImgArray[indexNum].src;
				}
				indexNum++;
				
				$('#elem').fadeTo('slow', 0, function(){
				 	$(this).css('background-image', 'url('+bgName+')');
				}).fadeTo('slow', 1);
			},4000);
		}

	});
</script>
</html>